{% extends "base.html" %}
{% block content %}
<form method="POST" action="{{ url_for('card') }}" class="form-wrap">
    <h2>Manual Card Entry</h2>	
    
     <label for="pan">Card Number:</label><br>
    <input type="text" name="pan" id="pan" placeholder="5423 5748 7648 9468" required
           pattern="[0-9]{13,19}" title="Enter a valid card number (13-19 digits)"
           oninput="this.value = this.value.replace(/\D/g, '').replace(/(\d{4})(?=\d)/g, '$1 ');"><br>
    
    <label for="expiry">Expiry Date (MM/YY):</label><br>
    <input type="text" name="expiry" id="expiry" placeholder="MM/YY" required
           pattern="(0[1-9]|1[0-2])\/?([0-9]{2})" title="Enter MM/YY (e.g., 09/26)"
           oninput="formatExpiryDate(this)"><br>

    <label for="cvv">CVV:</label><br>
    <input type="text" name="cvv" id="cvv" placeholder="123" required
           pattern="[0-9]{3,4}" title="Enter 3 or 4 digit CVV"><br>

    <button type="submit">Proceed to Auth</button>
</form>

<script>
function formatExpiryDate(input) {
    let value = input.value.replace(/\D/g, ''); // Remove non-digits
    if (value.length > 2) {
        // Add slash after 2 digits (MM)
        input.value = value.substring(0, 2) + '/' + value.substring(2, 4);
    } else {
        input.value = value;
    }
}
</script>
{% endblock %}
